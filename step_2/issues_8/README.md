# 문제 8: 음성에서 문자로 (Speech to Text)

이 프로젝트는 음성 파일을 텍스트로 변환하고 시간 정보와 함께 CSV 파일로 저장하는 STT(Speech to Text) 기능을 구현합니다.

## 주요 기능

1. **음성 파일에서 텍스트 추출**: WAV 파일에서 한국어 텍스트를 추출합니다.
2. **시간 정보 포함**: 각 텍스트 세그먼트의 시작 시간을 기록합니다.
3. **CSV 저장**: `[시간(초), 인식된 텍스트]` 형태로 CSV 파일에 저장합니다.
4. **키워드 검색**: 저장된 CSV 파일에서 키워드를 검색할 수 있습니다.

## 필요한 라이브러리

```bash
pip install -r ../requirements.txt
```

필요한 라이브러리:
- `speech_recognition==3.10.0`: Google Speech Recognition API 사용
- `pydub==0.25.1`: 음성 파일 처리 및 세그먼트 분할
- `sounddevice==0.4.6`: 음성 녹음 (기존 기능)
- `scipy==1.10.1`: WAV 파일 처리 (기존 기능)

## 사용 방법

### 1. 메인 프로그램 실행

```bash
cd ../issues_7
python javis.py
```

메뉴에서 다음 옵션들을 선택할 수 있습니다:
- `4`: 모든 음성 파일을 텍스트로 변환
- `5`: 특정 음성 파일을 텍스트로 변환
- `6`: 다른 디렉토리의 음성 파일들 처리
- `7`: 키워드 검색 (CSV 파일에서)

### 2. issues_8 폴더 직접 처리

```bash
python test_stt.py
```

현재 폴더(`issues_8`)의 모든 WAV 파일을 자동으로 처리합니다.

## 출력 파일

### CSV 파일 형식
```csv
시간(초),인식된 텍스트
0.0,안녕하세요
2.5,오늘 날씨가 좋네요
5.8,음성 인식 테스트입니다
```

### 저장 위치
- 메인 프로그램: `../issues_7/csv_outputs/`
- issues_8 직접 처리: `./csv_outputs/`

## 기술적 특징

### STT 처리 과정
1. **음성 파일 분할**: 무음 구간을 기준으로 세그먼트 분할
2. **개별 인식**: 각 세그먼트를 Google Speech Recognition으로 처리
3. **시간 계산**: 세그먼트별 누적 시간 계산
4. **결과 저장**: 시간과 텍스트를 CSV로 저장

### 코딩 스타일 (PEP8 준수)
- 함수명: `snake_case` (예: `speech_to_text`)
- 클래스명: `CapitalWords` (예: `SpeechToTextConverter`)
- 문자열: 기본적으로 `'single quotes'` 사용
- 들여쓰기: 공백 4칸

## 보너스 기능

### 키워드 검색
저장된 CSV 파일들에서 특정 키워드를 검색할 수 있습니다:

```python
stt_converter.search_in_csv("날씨")
```

검색 결과:
```
키워드 "날씨" 검색 결과:
[test1.csv] 2.5s: 오늘 날씨가 좋네요
[20250609-10_44_02.csv] 15.2s: 내일 날씨는 어떨까요
```

## 파일 구조

```
issues_8/
├── test1.wav              # 테스트 음성 파일 1
├── 20250609-10_44_02.wav  # 테스트 음성 파일 2
├── test_stt.py           # 직접 실행 스크립트
├── README.md             # 이 파일
└── csv_outputs/          # CSV 출력 폴더 (자동 생성)
    ├── test1.csv
    └── 20250609-10_44_02.csv
```

## 주의사항

1. **인터넷 연결 필요**: Google Speech Recognition API 사용
2. **음성 품질**: 명확한 발음과 적절한 음량이 인식률에 영향
3. **언어 설정**: 한국어(`ko-KR`)로 설정되어 있음
4. **임시 파일**: 처리 중 임시 파일이 생성되었다가 자동 삭제됨 